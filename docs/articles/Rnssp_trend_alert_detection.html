<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anomaly Detection and Trend Classification • Rnssp</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Anomaly Detection and Trend Classification">
<meta property="og:description" content="Rnssp">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZWFZHWFRD0"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZWFZHWFRD0');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rnssp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/Rnssp_intro.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Rnssp_intro.html">Introduction to the Rnssp package</a>
    </li>
    <li>
      <a href="../articles/Rnssp_text_mining.html">Text Mining Example</a>
    </li>
    <li>
      <a href="../articles/Rnssp_trend_alert_detection.html">Anomaly Detection and Trend Classification</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CDCgov/Rnssp/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Rnssp_trend_alert_detection_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Anomaly Detection and Trend Classification</h1>
                        <h4 class="author">Gbedegnon Roseric Azondekon</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CDCgov/Rnssp/blob/master/vignettes/Rnssp_trend_alert_detection.Rmd"><code>vignettes/Rnssp_trend_alert_detection.Rmd</code></a></small>
      <div class="hidden name"><code>Rnssp_trend_alert_detection.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>In this tutorial, we describe how to perform anomaly detection and trend classification analysis using line-level data from NSSP-ESSENCE. This vignette uses time series data from NSSP-ESSENCE data source for the CLI CC with CLI DD and Coronavirus DD v2 definition, limiting to ED visits (Has been Emergency = “Yes”).</p>
<p>We start this tutorial by loading the <code>Rnssp</code> package and all other necessary packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CDCgov/Rnssp">Rnssp</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jrnold/ggthemes">ggthemes</a></span><span class="op">)</span></code></pre></div>
<p>The next step is to create an NSSP user profile by creating an object of the class <code>Credentials</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Creating an ESSENCE user profile</span>
<span class="va">myProfile</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Credentials.html">Credentials</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  username <span class="op">=</span> <span class="fu"><a href="../reference/askme.html">askme</a></span><span class="op">(</span><span class="st">"Enter your username: "</span><span class="op">)</span>, 
  password <span class="op">=</span> <span class="fu"><a href="../reference/askme.html">askme</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">)</span>

<span class="co"># save profile object to file for future use</span>
<span class="co"># save(myProfile, "myProfile.rda") # saveRDS(myProfile, "myProfile.rds")</span>
<span class="co"># Load profile object</span>
<span class="co"># load("myProfile.rda") # myProfile &lt;- readRDS("myProfile.rds")</span></code></pre></div>
</div>
<div id="data-pull-from-nssp-essence" class="section level1">
<h1 class="hasAnchor">
<a href="#data-pull-from-nssp-essence" class="anchor"></a>Data Pull from NSSP-ESSENCE</h1>
<p>With the NSSP <code>myProfile</code> object, we authenticate to NSSP-ESSENCE and pull in the data using the Time series data table API.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://essence2.syndromicsurveillance.org/nssp_essence/api/timeSeries?endDate=20Nov20&amp;percentParam=ccddCategory&amp;datasource=va_hosp&amp;startDate=22Aug20&amp;medicalGroupingSystem=essencesyndromes&amp;userId=2362&amp;aqtTarget=TimeSeries&amp;ccddCategory=cli%20cc%20with%20cli%20dd%20and%20coronavirus%20dd%20v2&amp;geographySystem=hospitalstate&amp;detector=probregv2&amp;timeResolution=daily&amp;hasBeenE=1&amp;stratVal=&amp;multiStratVal=geography&amp;graphOnly=true&amp;numSeries=0&amp;graphOptions=multipleSmall&amp;seriesPerYear=false&amp;nonZeroComposite=false&amp;removeZeroSeries=true&amp;sigDigits=true&amp;startMonth=January&amp;stratVal=&amp;multiStratVal=geography&amp;graphOnly=true&amp;numSeries=0&amp;graphOptions=multipleSmall&amp;seriesPerYear=false&amp;startMonth=January&amp;nonZeroComposite=false"</span>

<span class="co"># Data Pull from NSSP-ESSENCE</span>
<span class="va">api_data</span> <span class="op">&lt;-</span> <span class="va">myProfile</span><span class="op">$</span><span class="fu">get_api_data</span><span class="op">(</span><span class="va">url</span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">api_data</span><span class="op">$</span><span class="va">timeSeriesData</span>

<span class="co"># glimpse(df)</span></code></pre></div>
</div>
<div id="anomaly-detection" class="section level1">
<h1 class="hasAnchor">
<a href="#anomaly-detection" class="anchor"></a>Anomaly Detection</h1>
<p>As of June 11, 2021, the <code>Rnssp</code> package implements two anomaly detection algorithms:</p>
<div id="exponentially-weighted-moving-average-ewma" class="section level2">
<h2 class="hasAnchor">
<a href="#exponentially-weighted-moving-average-ewma" class="anchor"></a>Exponentially Weighted Moving Average (EWMA)</h2>
<p>The Exponentially Weighted Moving Average (EWMA) compares a weighted average of the most recent visit counts to a baseline expectation. For the weighted average to be tested, an exponential weighting gives the most influence to the most recent observations. This algorithm is appropriate for daily counts that do not have the characteristic features modeled in the regression algorithm. It is more applicable for Emergency Department data from certain hospital groups and for time series with small counts (daily average below 10) because of the limited case definition or chosen geographic region. The EWMA detection algorithm can be performed with <code><a href="../reference/alert_ewma.html">alert_ewma()</a></code> function (run <code><a href="../reference/alert_ewma.html">help(alert_ewma)</a></code> or <code><a href="../reference/alert_ewma.html">?alert_ewma</a></code> in the R console for more).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_ewma</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/alert_ewma.html">alert_ewma</a></span><span class="op">(</span><span class="va">df</span>, t <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">count</span><span class="op">)</span></code></pre></div>
<p>Let’s visualize the time series with the anomalies for the state of South Dakota for example:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Subset the data</span>
<span class="va">df_ewma_state</span> <span class="op">&lt;-</span> <span class="va">df_ewma</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">hospitalstate_display</span> <span class="op">==</span> <span class="st">"South Dakota"</span><span class="op">)</span>

<span class="co"># Plot time series data</span>
<span class="va">df_ewma_state</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">t</span>, y <span class="op">=</span> <span class="va">count</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">df_ewma_state</span>, <span class="va">alert</span> <span class="op">==</span> <span class="st">"red"</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">df_ewma_state</span>, <span class="va">alert</span> <span class="op">==</span> <span class="st">"yellow"</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"yellow"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>,
       y <span class="op">=</span> <span class="st">"Percent"</span><span class="op">)</span></code></pre></div>
<p><img src="Rnssp_trend_alert_detection_files/figure-html/alert_ewma_viz-1.png" width="700"></p>
</div>
<div id="multiple-adaptive-regression-mar" class="section level2">
<h2 class="hasAnchor">
<a href="#multiple-adaptive-regression-mar" class="anchor"></a>Multiple Adaptive Regression (MAR)</h2>
<p>The Multiple Adaptive Regression (MAR) algorithm fits a linear model to a baseline of counts or percentages, and forecasts a predicted value som predefined days later. This model includes terms to account for linear trends and day-of-week effects. This implementation does NOT include holiday terms as in the Regression 1.2 algorithm in ESSENCE. The EWMA detection algorithm can be performed with <code><a href="../reference/alert_mar.html">alert_mar()</a></code> function (run <code><a href="../reference/alert_mar.html">help(alert_mar)</a></code> or <code><a href="../reference/alert_mar.html">?alert_mar</a></code> in the R console for more).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_mar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/alert_mar.html">alert_mar</a></span><span class="op">(</span><span class="va">df</span>, t <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">count</span><span class="op">)</span></code></pre></div>
<p>Let’s visualize the time series with the anomalies for the state of South Dakota for example:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Subset the data</span>
<span class="va">df_mar_state</span> <span class="op">&lt;-</span> <span class="va">df_mar</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">hospitalstate_display</span> <span class="op">==</span> <span class="st">"South Dakota"</span><span class="op">)</span>

<span class="co"># Plot time series data</span>
<span class="va">df_mar_state</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">t</span>, y <span class="op">=</span> <span class="va">count</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">df_mar_state</span>, <span class="va">alert</span> <span class="op">==</span> <span class="st">"red"</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">df_mar_state</span>, <span class="va">alert</span> <span class="op">==</span> <span class="st">"yellow"</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"yellow"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>,
       y <span class="op">=</span> <span class="st">"Percent"</span><span class="op">)</span></code></pre></div>
<p><img src="Rnssp_trend_alert_detection_files/figure-html/alert_mar_viz-1.png" width="700"></p>
</div>
</div>
<div id="trend-classification" class="section level1">
<h1 class="hasAnchor">
<a href="#trend-classification" class="anchor"></a>Trend Classification</h1>
<p>The trend classification fits rolling binomial models to a daily time series of percentages or proportions in order to classify the overall trend during the baseline period as significantly increasing, significantly decreasing, or stable. The algorithm can be performed via the <code><a href="../reference/classify_trend.html">classify_trend()</a></code> function (run <code><a href="../reference/classify_trend.html">help(classify_trend)</a></code> or <code><a href="../reference/classify_trend.html">?classify_trend</a></code> for more). The test statistic and p-value are extracted from each individual model and are used in the following classification scheme:</p>
<ul>
<li>p-value &lt; 0.01 and sign(test_statistic) &gt; 0 ~ “Significant Increase”</li>
<li>p-value &lt; 0.01 and sign(test_statistic) &lt; 0 ~ “Significant Decrease”</li>
<li>p-value &gt;= 0.01 ~ “Stable”</li>
</ul>
<p>If there are fewer than 10 encounters/counts in the baseline period, a model is not fit and a value of NA is returned for the test statistic and p-value</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_trend</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classify_trend.html">classify_trend</a></span><span class="op">(</span><span class="va">df</span>, data_count <span class="op">=</span> <span class="va">dataCount</span>, all_count <span class="op">=</span> <span class="va">allCount</span><span class="op">)</span></code></pre></div>
<p>Let’s visualize the trends for the state of Montana for example:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Defining a color palette</span>
<span class="va">pal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#FF0000"</span>, <span class="st">"#1D8AFF"</span>, <span class="st">"#FFF70E"</span>, <span class="st">"grey90"</span><span class="op">)</span>

<span class="co"># Plot trend</span>
<span class="va">data_trend</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>percent <span class="op">=</span> <span class="va">data_count</span><span class="op">/</span><span class="va">all_count</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">title</span> <span class="op">==</span> <span class="st">"Montana"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">t</span>, y <span class="op">=</span> <span class="va">percent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">pal</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="op">-</span><span class="fl">0.4</span>, size <span class="op">=</span> <span class="fl">4.5</span>, color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html">geom_segment</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">t</span>, xend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span>, y <span class="op">=</span> <span class="op">-</span><span class="fl">0.4</span>, yend <span class="op">=</span> <span class="op">-</span><span class="fl">0.4</span>, 
                   color <span class="op">=</span> <span class="va">trend_classification</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">pal</span>, name <span class="op">=</span> <span class="st">"Trend Classification"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_few.html">theme_few</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Percent of Emergency Department Visits with Diagnosed COVID-19"</span>,
       subtitle <span class="op">=</span> <span class="st">"August 22nd, 2020 to November 20th, 2020"</span>,
       x <span class="op">=</span> <span class="st">"Date"</span>,
       y <span class="op">=</span> <span class="st">"Percent"</span><span class="op">)</span></code></pre></div>
<p><img src="Rnssp_trend_alert_detection_files/figure-html/classify_trend_viz-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Gbedegnon Roseric Azondekon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
